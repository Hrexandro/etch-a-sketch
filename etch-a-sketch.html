<link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Chango&display=swap" rel="stylesheet">
<style>
h1 {
    font-family: 'Lobster';
    font-size:38px;
    color: rgb(197, 160, 104);
}

.square {
    background-color:black;
    opacity: 0;
    border-image-width: 0;
}

body {
    background-color:rgb(252, 252, 149);
    text-align:center;
    display: flex;
    flex-direction: column;
    justify-content:center;
    align-items: center;
}



#mainDiv {
    
    display: flex;
    flex-direction: column;
    justify-content:center;
    align-items: center;
    
        width:1200px;
 margin-left: auto;
 margin-right: auto;
  background-color:rgb(160, 0, 0);
  border-radius: 15px;
}

#gridDiv {
    display: grid;
    height:500px;
    width:600px;
    row-gap: 0px;
    column-gap:0px;
    box-sizing:initial;
    background-color:white;
}

#buttons-one {
    width:80%;
    display:flex;
    justify-content:space-between;
    margin-top:35px;
    align-items:center;
    
    
}
#buttons-two{
    width:80%;
    display:flex;
    justify-content:space-between;
    margin-bottom:45px;
    align-items:flex-start;
    
}
input::-webkit-color-swatch {
    border: none;
}
#choose{
    /*position this on the button!*/
    
    outline:none;
    border-radius: 15px;
    width:130px;
    height:30px;
    background-color:black;
    padding: 2px;
    border:none;
    color:white;
    
}
p{
    color:white;
}
button {
    border-radius: 15px;
    width:130px;
    height:30px;
    outline:none;
    border:none;
    background-color:WHITE;
    font-family: Chango;
}

#clear:active,#resize:active,.pressed{
    box-shadow: inset 0px 0px 6px #0c0c0c,0px 0px 6px #0c0c0c;
    background-color: #ffffff;
}

.pressedcolor {
    box-shadow: 0px 0px 6px #0c0c0c;
}


.fake{
    visibility: hidden;
    
}

.buttonlabel{
 background-color: rgb(160, 0, 0); 
 border:none;
 color:white;
 
 font-family: Chango;
 font-size:18px;
}

</style>
<html>
<head>
    <title>Etch-a-Sketch</title>
    
</head>
<body>

<div id="mainDiv">
    <h1>Etch-A-Sketch</h1>
    <div id="gridDiv"></div>
    <div id="buttons-one">
        <button class="realbutton" id="randomize"></button>
        <button class="realbutton" id="clear"></button>
        <button class="realbutton" id="resize"></button>
        <button class="realbutton" id="erase"></button>
        <input  type="color" id="choose">
       <!--<input type="checkbox">--> 
    </div>      
    <div id="buttons-two">
        <button class="buttonlabel">RANDOM</button>
        <button class="buttonlabel">CLEAR</button>
        <button class="buttonlabel">RESIZE</button>
        <button class="buttonlabel">ERASE</button>
        <button class="buttonlabel">COLOR</button>
       <!-- <button class="buttonlabel">HOVER / CLICK</button>--> 
    </div>

</div>

<script>
let squares = gridDiv.children

let clearButton = document.getElementById("clear");
let randomButton = document.getElementById("randomize");
let resizeButton = document.getElementById("resize");
let eraseButton = document.getElementById("erase");
let gridSide=16;
function generateGrid() {
    for (i=0;i<squares.length;i++){
        squares[i].style.opacity='0'
        }
    if (isNaN(gridSide)||!Number.isInteger(Number(gridSide))||gridSide<=0||gridSide>=100) {
        alert("The number should be a positive integer lower than 100.")
    }
    else {
        gridDiv.style.gridTemplateColumns=`repeat(${gridSide}, 1fr)`;
        gridDiv.style.gridTemplateRows=`repeat(${gridSide}, 1fr)`;
        for (i=0;i<gridSide*gridSide;i++){
            let div = document.createElement('div');
            document.getElementById('gridDiv').appendChild(div);
        }

        for (i=0;i<squares.length;i++){
        squares[i].classList.add('square');
        squares[i].addEventListener('mousemove',increaseOpacity)
        }
    }
}
function increaseOpacity (e) {
    event.target.style.opacity=Number(event.target.style.opacity)+Number('0.15');
}

function reduceOpacity (e){
    event.target.style.opacity=Number(event.target.style.opacity)-Number('0.15');
}

clearButton.addEventListener('click', ()=>{
    if (isNaN(gridSide)||!Number.isInteger(Number(gridSide))||gridSide<=0||gridSide>=100) {
        gridSide=16;
    }
    generateGrid()
})

eraseButton.addEventListener('click',()=>{  
    eraseButton.classList.add('pressed');
    clearButtons('erase')
    for (i=0;i<squares.length;i++){
        squares[i].removeEventListener('mousemove',paintWithSelected);
        squares[i].removeEventListener('mousemove',increaseOpacity);
        squares[i].addEventListener('mousemove',reduceOpacity);
        }
    }
)
let buttons = document.getElementsByClassName('realbutton');
function clearButtons(id){
    for (i=0; i<buttons.length;i++){
        if (buttons[i].getAttribute('id') !== `${id}`){
        buttons[i].classList.remove('pressed');
        }
    }
    if (id !== "choose"){
        colorInput.classList.remove('pressedcolor')
    }
}

resizeButton.addEventListener('click', ()=>{
    gridSide = prompt("Set number of pixels per side.")
    generateGrid()
})

randomButton.addEventListener('click', ()=>{
    randomButton.classList.add('pressed');//
    clearButtons('randomize');//
    for (i=0;i<squares.length;i++){
        squares[i].removeEventListener('mousemove',reduceOpacity);
        squares[i].removeEventListener('mousemove',paintWithSelected);
        squares[i].addEventListener('mousemove',paintWithRandom)
        squares[i].addEventListener('mousemove',increaseOpacity);

    }
})

let colorInput = document.getElementById("choose")

function pickColor(){
    colorInput.classList.add('pressedcolor');
    clearButtons('choose');
    colorInput.style.backgroundColor=`${colorInput.value}`
    for (i=0;i<squares.length;i++){      
        squares[i].removeEventListener('mousemove',reduceOpacity);
        squares[i].addEventListener('mousemove',increaseOpacity);
        squares[i].addEventListener('mousemove',paintWithSelected);
    }
}

function paintWithRandom(e) {
    event.target.style.backgroundColor=`rgb(${Math.floor((Math.random() * 100) + 1)},${Math.floor((Math.random() * 100) + 1)},${Math.floor((Math.random() * 100) + 1)})`
}

function paintWithSelected(e) {
    event.target.style.backgroundColor=`${colorInput.value}`
}

colorInput.addEventListener('input', ()=>{
    pickColor()
})
generateGrid()

</script>
</body>

</html>